
{% block content %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <link rel="stylesheet" href="/profile.css">
</head>
<body>
  <div class="container">
    <div class="profile-wrap">
      <div class="header">
        <a href="/">
          <img src="/images/arrow.png" class="back-button" alt="뒤로가기">
        </a>
        <div class="greeting">
          {% if user and user.nick %}
            <span>{{ user.nick }}님</span><br>
            <span>안녕하세요</span>
          {% else %}
            <span>로그인이 필요합니다.</span>
          {% endif %}
        </div>
        {% if user %}
          <a href="/auth/logout" class="logout-btn">로그아웃</a>
        {% endif %}
      </div>
  
  <h2 class="title">Profile</h2>
  <div class="my-page">
    <img src="images/cook.png" id="cook">
    <div class="reviews">
      {% if reviews.length > 0 %}
      {% for review in reviews %}
          <div class="review-item">
              <h4>{{ review.restaurant.name }}</h4>
              <p class="review-text">{{ review.content }}</p>
              <span class="review-rating">⭐ {{ review.rating }}</span><br>
              <span class="review-date">
                {% if review.createdAt %}
                    {{ review.createdAt }}
                {% else %}
                    <span>날짜 정보 없음</span>
                {% endif %}
            </span>
          </div>
      {% endfor %}
      {% else %}
      <p>작성한 리뷰가 없습니다.</p>
      {% endif %}
    </div>
  </div>
  <div class="timeline">
    <div class="followings half">
      <h2>찜 목록 개수: {{followingCount}}</h2>
      {% if user.Followings %}
        {% for following in user.Followings %}
          <div>
            <a href="/restaurant/res/{{ following.id }}">{{ following.name }}</a>
          </div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
<script>
    function formatDate(dateString) {
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        const hours = String(date.getHours()).padStart(2, '0');
        const minutes = String(date.getMinutes()).padStart(2, '0');

        return `${year}-${month}-${day} ${hours}:${minutes}`;
    }
    
    document.querySelectorAll('.review-date').forEach(el => {
        el.textContent = formatDate(el.textContent);
    });
</script>
</body>
</html>